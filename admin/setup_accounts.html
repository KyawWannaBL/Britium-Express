<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Britium Admin Diagnostic</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body class="bg-warning p-5">
    <div class="card p-4 mx-auto shadow" style="max-width: 600px;">
        <h3>üõ†Ô∏è Diagnostic Mode</h3>
        <p>This tool will tell us the exact error.</p>
        <button id="runBtn" class="btn btn-dark w-100 fw-bold py-3">RUN DIAGNOSTIC & CREATE</button>
        <div id="status" class="mt-3 p-3 border rounded small font-monospace bg-white">Ready.</div>
    </div>

     <script>
        // ‚ö†Ô∏è STEP 1: PASTE YOUR REAL FIREBASE KEYS HERE
        // Go to Firebase Console -> Project Settings -> General -> Your Apps -> Web
	const firebaseConfig = {
        apiKey: "AIzaSyCbrF5_QW6Nb3rBVkozT2y0KotL8clr8Jo",
        authDomain: "britium-express.firebaseapp.com",
        projectId: "britium-express",
        storageBucket: "britium-express.firebasestorage.app",
        messagingSenderId: "406522036528",
        appId: "1:406522036528:web:7713801d6832932067c8f5"
};

        const statusDiv = document.getElementById('status');
        function log(msg) { statusDiv.innerHTML += msg + "<br>"; }

        document.getElementById('runBtn').addEventListener('click', async () => {
            statusDiv.innerHTML = "";
            log("1. Checking Firebase libraries...");
            
            if (typeof firebase === 'undefined') {
                alert("CRITICAL ERROR: Firebase scripts did not load.\nAre you connected to the internet?");
                return;
            }

            try {
                log("2. Initializing App...");
                if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
                const auth = firebase.auth();
                const db = firebase.database();

                log("3. Testing Database Connection...");
                // Simple write test
                await db.ref('connection_test').set(true);
                log("‚úÖ Database Connection SUCCESS.");

                log("4. Attempting to create first admin...");
                const email = "mgkyawwanna@gmail.com";
                const pass = "Britium2026!";

                await auth.createUserWithEmailAndPassword(email, pass);
                
                // If we get here, it worked!
                alert("SUCCESS! The account " + email + " was created.\nThe code is working now.");
                log("‚úÖ ACCOUNT CREATED SUCCESSFULLY.");

            } catch (error) {
                // THIS IS THE IMPORTANT PART
                console.error(error);
                let easyError = "Unknown Error";

                if (error.code === 'auth/operation-not-allowed') {
                    easyError = "STOP! You did not enable 'Email/Password' in Firebase Console -> Authentication.";
                } else if (error.code === 'auth/invalid-api-key') {
                    easyError = "STOP! Your API Key is wrong. Check quotes and commas.";
                } else if (error.code === 'auth/email-already-in-use') {
                    easyError = "Good news! This account ALREADY EXISTS. You can just login.";
                } else if (error.code === 'PERMISSION_DENIED') {
                    easyError = "Database Locked. You need to fix the Rules tab again.";
                } else {
                    easyError = "Error: " + error.message;
                }

                alert(easyError);
                log("‚ùå FAILED: " + easyError);
            }
        });
    </script>
</body>
</html>
